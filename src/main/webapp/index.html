<!DOCTYPE html>
<html lang="en">

    <style>

 .node circle {
   fill: #fff;
   stroke: steelblue;
   stroke-width: 3px;
 }

 .node text { font: 12px sans-serif; }

 .link {
   fill: none;
   stroke: #ccc;
   stroke-width: 2px;
 }
 
.node {
  cursor: pointer;
 }
 div#tooltip{
    color:#ffffff;
    background:#000000;
    opacity:1;
    padding:5px;
}
    </style>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
 
    <title>AWS DASHBOARD</title>

    <link rel="shortcut icon" href="https://d32gc0xr2ho6pa.cloudfront.net/img/general/favicon.ico" type="image/x-icon" />
<link
	href="assets/bower_components/bootstrap/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="assets/bower_components/bootstrap/dist/css/bootstrap-theme.min.css"
	rel="stylesheet">
<link href="assets/bower_components/normalize-css/normalize.css"
	rel="stylesheet">
<link href="assets/bower_components/font-awesome/css/font-awesome.min.css"
	rel="stylesheet">
<link href="assets/css/dashboard.css" rel="stylesheet">

</head>

<body>

  

        
        <div id="page-wrapper">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            AWS Dashboard 
                        </h1>
                    </div>
                </div>

                <div class="row" id="messageBox">
                    <div class="col-lg-12">
                        <div class="alert alert-info alert-dismissable" >
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                            <i class="fa fa-info-circle"></i>  <span id="progressmsg"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-3 col-md-6">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                            Weather Data
                            </div>
                            <a href="#" onclick="change_color();">
                                <div class="panel-footer">
                                    <button class="btn  btn-primary btn-sm" id="weatherData"> Start</button>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="panel panel-green">
                            <div class="panel-heading">
                            Generate Mockup Data</div>
                            <a href="#">
                                <div class="panel-footer">
                                    <button class="btn  btn-success btn-sm" id="mockupdata"> Start</button>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="panel panel-yellow">
                            <div class="panel-heading">
                                Non Stock Data</div>
                            <a href="#">
                                <div class="panel-footer">
                                    <button class="btn  btn-warning btn-sm"> Start</button>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="panel panel-red">
                            <div class="panel-heading">
                            Incremental Data
                            </div>
                            <a href="#">
                                <div class="panel-footer">
                                    <button class="btn   btn-danger btn-sm" id="incrementalData"> Start</button>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Data Flow</h3>
                            </div>
                            <div class="panel-body">
                                <div id="tree"></div>
                                
                                <div id="tooltip" class="popover" role="tooltip" style="background:#ffffff;color:black;">
                                <div class="popover-arrow"></div>
                                <h3 class="popover-title">Status</h3>
                                <div class="popover-content" style="font-size:10px; word-wrap: break-word;">Test</div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
 
            </div>

        </div>
    <script src="assets/bower_components/jquery/dist/jquery.min.js"></script>

    <script
		src="assets/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- <script
		src="assets/bower_components/d3/d3.min.js"></script> -->
		
		<script src="http://d3js.org/d3.v3.min.js"></script>

    <script src="assets/js/d3_custom.js"></script>
    <script src="assets/js/dashboard.js"></script>
     <script type="text/javascript">
///check for browser support

//send json string like this
//String json = "{\"class\":\"mysql\",\"color\":\"green\",\"status\":3}";
//out.print("data: " +json + "\n\n");
 

 if(typeof(EventSource)!=="undefined") {
     var eSource = new EventSource("http://localhost:8080/AmazonByod/DashboardOperation");
     alert(JSON.stringify(eSource))
        eSource.onmessage = function(event) {
        var obj = JSON.parse(event.data);
         alert(event)
        $("path."+obj.class)
        .delay(800)
        .queue(function (next) { 
        $(this).css('stroke', obj.color); 
        next(); 
        });

        $("circle."+obj.class)
        .delay(1000)
        .queue(function (next) { 
        $(this).css('stroke', 'black'); 
        next(); 
        });

        $("circle."+obj.class)
        .delay(1200)
        .queue(function (next) { 
        $(this).css('fill', obj.color); 
        next(); 
        });

        $("text."+obj.class).attr('id',obj.status);

    };
}
else {
document.getElementById("serverData").innerHTML="Whoops! Your browser doesn't receive server-sent events.";
}

</script>

 

<script>

function change_color()
{
   $('.main').css("stroke", "green");
   //.style("fill", function(d) { return d.level; });
   $('.main').css("fill", "red");
   //.style("stroke", function(d) { return d.target.level; })

}
</script>
</body>

</html>
